services:
  migrations:
    image: node:20-alpine
    depends_on:
      - db
    working_dir: /app
    volumes:
      - ./backend:/app
    entrypoint: ["pnpm", "--filter", "prodvor-backend", "prisma:migrate:deploy"]
    environment:
      - DATABASE_URL=${DATABASE_URL}
    networks:
      - default

networks:
  default:
    external: false
