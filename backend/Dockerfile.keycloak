# Используем официальный образ Keycloak
FROM quay.io/keycloak/keycloak:25.0.1

# Keycloak запускается от пользователя 'keycloak' (uid 1000)
# Устанавливаем рабочую директорию
WORKDIR /opt/keycloak

# Копируем файл конфигурации реалма в специальную директорию для импорта
COPY ./config/keycloak/realm-export.json /opt/keycloak/data/import/

# Меняем владельца директории на пользователя keycloak, чтобы избежать проблем с правами доступа в CI
RUN chown -R keycloak:keycloak /opt/keycloak/data/import
