# Используем официальный образ Keycloak
FROM quay.io/keycloak/keycloak:25.0.1

# Этот этап выполняется при сборке образа (`docker compose build`)
# Он оптимизирует Keycloak для работы с PostgreSQL.
RUN /opt/keycloak/bin/kc.sh build --db=postgres

# Команда по умолчанию для запуска контейнера (`docker compose up`)
CMD ["start", "--optimized"]
