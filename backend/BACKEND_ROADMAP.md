# Дорожная карта разработки бэкенда

Этот документ представляет собой высокоуровневый план по созданию и запуску серверной части для платформы "ProDvor", заменяя текущие моковые данные и прототипные решения на полноценные продакшен-системы.

## Фаза 1: Фундаментальная Инфраструктура (Завершено)
-   **Цель:** Создать безопасную и масштабируемую основу для всего приложения.
-   **Статус:** **Выполнено.**
-   **Ключевые задачи:**
    -   [x] **Настройка СУБД:** Развернуты и настроены кластеры PostgreSQL для основного приложения и для Keycloak.
    -   [x] **Схема данных:** Разработана базовая схема данных с помощью Prisma ORM. Настроены миграции.
    -   [x] **Identity Provider:** Настроен Keycloak для будущего управления пользователями и аутентификацией.
    -   [x] **API Gateway:** Настроен Kong для будущей маршрутизации и защиты эндпоинтов.
    -   [x] **Брокеры сообщений:** Развернуты и сконфигурированы **Apache Kafka** и **RabbitMQ** для асинхронного взаимодействия.

## Фаза 2: Полное "оживление" API (Завершено)
-   **Цель:** Полностью искоренить все моковые (тестовые) данные из фронтенда и заменить их на реальные API-вызовы.
-   **Статус:** **Выполнено.**
-   **Ключевые задачи:**
    -   [x] **Разработка CRUD-эндпоинтов:** Реализованы все необходимые REST API-эндпоинты для сущностей: `Users`, `Teams`, `Matches`, `Tournaments`.
    -   [x] **Замена моков на фронтенде:** Все вызовы моковых данных (`src/shared/lib/mock-data/*`) заменены на реальные API-запросы к бэкенду.
    -   [x] **Перенос AI-логики:** Все вызовы к Genkit-флоу инкапсулированы на бэкенде и доступны фронтенду через защищенные эндпоинты.

## Фаза 3: Внедрение асинхронных и Real-time систем (Завершено)
-   **Цель:** Интегрировать Kafka и RabbitMQ в бизнес-логику для реализации чата, уведомлений и других асинхронных задач.
-   **Статус:** **Выполнено.**
-   **Ключевые задачи:**
    -   [x] **Интеграция Kafka для чата:** Создан `chat-service` и реализован WebSocket API.
    -   [x] **Интеграция RabbitMQ для уведомлений:** Создан `notification-service`, который обрабатывает события от других сервисов.

## Фаза 4: Внедрение Production-аутентификации (Завершено)
-   **Цель:** Заменить текущую прототипную систему аутентификации на безопасную и масштабируемую связку Keycloak + Kong.
-   **Статус:** **Выполнено.**
-   **Ключевые задачи:**
    -   [x] **Удаление хранения паролей:** Полностью удалена логика хранения и проверки паролей на бэкенде.
    -   [x] **Включение JWT-валидации:** Все эндпоинты бэкенда по умолчанию защищены с помощью `JwtAuthGuard`.
    -   [x] **Усиление JWT-валидации**: Добавлена проверка существования пользователя в БД при каждом запросе.
    -   [x] **Замена моковой аутентификации**: Переписана логика входа/регистрации на фронтенде для работы с реальным бэкендом.

## Фаза 5: Финальная полировка и зачистка
-   **Цель:** Подготовить кодовую базу к долгосрочной поддержке и запуску.
-   **Статус:** **В процессе.**
-   **Ключевые задачи:**
    -   [x] **"Оживление" управления пользователями**: Страница управления пользователями переведена на реальные API-вызовы.
    -   [x] **"Оживление" системы друзей**: Полностью реализована система дружбы с бэкендом и уведомлениями.
    -   [x] **"Оживление" промо-акций**: Раздел промо-акций переведен на реальное API.
    -   [ ] **Тестирование:** Покрыть критически важную бизнес-логику юнит- и интеграционными тестами.
    -   [ ] **Удаление мертвого кода:** Полностью удалить все моковые данные и неиспользуемые файлы.
    -   [ ] **CI/CD:** Оптимизировать пайплайны для автоматической сборки и развертывания.
    -   [ ] **Финальная документация:** Обновить все документы, чтобы они на 100% соответствовали финальному продукту.
    -   [ ] **Приложение готово!**
